function EDMUNDSAPI(e){function t(e){var t="";for(var i in e)e.hasOwnProperty(i)&&(""!==t&&(t+="&"),t+=i+"="+e[i]);return t}var i=e;if("http:"==window.location.protocol||"https:"==window.location.protocol)var s=window.location.protocol+"//api.edmunds.com";else var s="http://api.edmunds.com";var n=window.location.protocol+"//media.ed.edmunds-media.com",r="json";this.setOutput=function(e){return r=e},this.getBaseUrl=function(){return s},this.getBaseMediaUrl=function(){return n},this.api=function(e,s,n,o){var a=t(s),h=this.getBaseUrl();return a=a?"?"+a+"&api_key="+i+"&fmt="+r:"?api_key="+i+"&fmt="+r,this.jsonp({url:h+e+a,timeout:7e3,success:n,error:o,cache:!0})},this.jsonp=function(e){"use strict";function t(e){var t=document.createElement("script");return t.setAttribute("type","text/javascript"),t.setAttribute("async",!0),t.setAttribute("src",e),t}var i=0,s=document.head||document.getElementsByTagName("head")[0];return function(n){function r(){u&&u.parentNode.removeChild(u),clearTimeout(l),delete e[c]}function o(e){"function"==typeof n.success&&n.success(e)}function a(e){"function"==typeof n.error&&n.error(e)}function h(t){r(),"timeout"===t&&(e[c]=function(){}),a(t),window.console.log(t+": One of the scripts failed to load ("+c+")")}n=n||{};var l,c="callback"+(new Date).getTime()+ ++i,p=n.url+"&callback="+c+(n.cache?"":"&_dc="+(new Date).getTime()),u=t(p);e[c]=function(e){r(),o(e)},u.onerror=function(e){h(e)},s.appendChild(u),n.timeout>0&&(l=setTimeout(function(){h("timeout")},n.timeout))}}(window)}function simpleHandlebarsCompiler(e,t,i){var s=Handlebars.compile($(e).html());$(i).html(s(t))}var Handlebars=function(){var e=function(){"use strict";function e(e){this.string=e}var t;return e.prototype.toString=function(){return""+this.string},t=e}(),t=function(e){"use strict";function t(e){return a[e]||"&amp;"}function i(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}function s(e){return e instanceof o?""+e:e||0===e?(e=""+e,l.test(e)?e.replace(h,t):e):""}function n(e){return e||0===e?u(e)&&0===e.length?!0:!1:!0}var r={},o=e,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},h=/[&<>"'`]/g,l=/[&<>"'`]/;r.extend=i;var c=Object.prototype.toString;r.toString=c;var p=function(e){return"function"==typeof e};p(/x/)&&(p=function(e){return"function"==typeof e&&"[object Function]"===c.call(e)});var p;r.isFunction=p;var u=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===c.call(e):!1};return r.isArray=u,r.escapeExpression=s,r.isEmpty=n,r}(e),i=function(){"use strict";function e(e,t){var s;t&&t.firstLine&&(s=t.firstLine,e+=" - "+s+":"+t.firstColumn);for(var n=Error.prototype.constructor.call(this,e),r=0;i.length>r;r++)this[i[r]]=n[i[r]];s&&(this.lineNumber=s,this.column=t.firstColumn)}var t,i=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=Error(),t=e}(),s=function(e,t){"use strict";function i(e,t){this.helpers=e||{},this.partials=t||{},s(this)}function s(e){e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new a("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,i){var s=i.inverse||function(){},n=i.fn;return u(t)&&(t=t.call(this)),t===!0?n(this):t===!1||null==t?s(this):p(t)?t.length>0?e.helpers.each(t,i):s(this):n(t)}),e.registerHelper("each",function(e,t){var i,s=t.fn,n=t.inverse,r=0,o="";if(u(e)&&(e=e.call(this)),t.data&&(i=f(t.data)),e&&"object"==typeof e)if(p(e))for(var a=e.length;a>r;r++)i&&(i.index=r,i.first=0===r,i.last=r===e.length-1),o+=s(e[r],{data:i});else for(var h in e)e.hasOwnProperty(h)&&(i&&(i.key=h,i.index=r,i.first=0===r),o+=s(e[h],{data:i}),r++);return 0===r&&(o=n(this)),o}),e.registerHelper("if",function(e,t){return u(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,i){return e.helpers["if"].call(this,t,{fn:i.inverse,inverse:i.fn,hash:i.hash})}),e.registerHelper("with",function(e,t){return u(e)&&(e=e.call(this)),o.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,i){var s=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;e.log(s,t)})}function n(e,t){m.log(e,t)}var r={},o=e,a=t,h="1.3.0";r.VERSION=h;var l=4;r.COMPILER_REVISION=l;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};r.REVISION_CHANGES=c;var p=o.isArray,u=o.isFunction,g=o.toString,d="[object Object]";r.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:m,log:n,registerHelper:function(e,t,i){if(g.call(e)===d){if(i||t)throw new a("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else i&&(t.not=i),this.helpers[e]=t},registerPartial:function(e,t){g.call(e)===d?o.extend(this.partials,e):this.partials[e]=t}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(e>=m.level){var i=m.methodMap[e];"undefined"!=typeof console&&console[i]&&console[i].call(console,t)}}};r.logger=m,r.log=n;var f=function(e){var t={};return o.extend(t,e),t};return r.createFrame=f,r}(t,i),n=function(e,t,i){"use strict";function s(e){var t=e&&e[0]||1,i=u;if(t!==i){if(i>t){var s=g[i],n=g[t];throw new p("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+s+") or downgrade your runtime to an older version ("+n+").")}throw new p("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function n(e,t){if(!t)throw new p("No environment passed to template");var i=function(e,i,s,n,r,o){var a=t.VM.invokePartial.apply(this,arguments);if(null!=a)return a;if(t.compile){var h={helpers:n,partials:r,data:o};return r[i]=t.compile(e,{data:void 0!==o},t),r[i](s,h)}throw new p("The partial "+i+" could not be compiled when running in runtime-only mode")},s={escapeExpression:c.escapeExpression,invokePartial:i,programs:[],program:function(e,t,i){var s=this.programs[e];return i?s=o(e,t,i):s||(s=this.programs[e]=o(e,t)),s},merge:function(e,t){var i=e||t;return e&&t&&e!==t&&(i={},c.extend(i,t),c.extend(i,e)),i},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(i,n){n=n||{};var r,o,a=n.partial?n:t;n.partial||(r=n.helpers,o=n.partials);var h=e.call(s,a,i,r,o,n.data);return n.partial||t.VM.checkRevision(s.compilerInfo),h}}function r(e,t,i){var s=Array.prototype.slice.call(arguments,3),n=function(e,n){return n=n||{},t.apply(this,[e,n.data||i].concat(s))};return n.program=e,n.depth=s.length,n}function o(e,t,i){var s=function(e,s){return s=s||{},t(e,s.data||i)};return s.program=e,s.depth=0,s}function a(e,t,i,s,n,r){var o={partial:!0,helpers:s,partials:n,data:r};if(void 0===e)throw new p("The partial "+t+" could not be found");return e instanceof Function?e(i,o):void 0}function h(){return""}var l={},c=e,p=t,u=i.COMPILER_REVISION,g=i.REVISION_CHANGES;return l.checkRevision=s,l.template=n,l.programWithDepth=r,l.program=o,l.invokePartial=a,l.noop=h,l}(t,i,s),r=function(e,t,i,s,n){"use strict";var r,o=e,a=t,h=i,l=s,c=n,p=function(){var e=new o.HandlebarsEnvironment;return l.extend(e,o),e.SafeString=a,e.Exception=h,e.Utils=l,e.VM=c,e.template=function(t){return c.template(t,e)},e},u=p();return u.create=p,r=u}(s,e,i,t,n),o=function(e){"use strict";function t(e){e=e||{},this.firstLine=e.first_line,this.firstColumn=e.first_column,this.lastColumn=e.last_column,this.lastLine=e.last_line}var i,s=e,n={ProgramNode:function(e,i,s,r){var o,a;3===arguments.length?(r=s,s=null):2===arguments.length&&(r=i,i=null),t.call(this,r),this.type="program",this.statements=e,this.strip={},s?(a=s[0],a?(o={first_line:a.firstLine,last_line:a.lastLine,last_column:a.lastColumn,first_column:a.firstColumn},this.inverse=new n.ProgramNode(s,i,o)):this.inverse=new n.ProgramNode(s,i),this.strip.right=i.left):i&&(this.strip.left=i.right)},MustacheNode:function(e,i,s,r,o){if(t.call(this,o),this.type="mustache",this.strip=r,null!=s&&s.charAt){var a=s.charAt(3)||s.charAt(2);this.escaped="{"!==a&&"&"!==a}else this.escaped=!!s;this.sexpr=e instanceof n.SexprNode?e:new n.SexprNode(e,i),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,i,s){t.call(this,s),this.type="sexpr",this.hash=i;var n=this.id=e[0],r=this.params=e.slice(1),o=this.eligibleHelper=n.isSimple;this.isHelper=o&&(r.length||i)},PartialNode:function(e,i,s,n){t.call(this,n),this.type="partial",this.partialName=e,this.context=i,this.strip=s},BlockNode:function(e,i,n,r,o){if(t.call(this,o),e.sexpr.id.original!==r.path.original)throw new s(e.sexpr.id.original+" doesn't match "+r.path.original,this);this.type="block",this.mustache=e,this.program=i,this.inverse=n,this.strip={left:e.strip.left,right:r.strip.right},(i||n).strip.left=e.strip.right,(n||i).strip.right=r.strip.left,n&&!i&&(this.isInverse=!0)},ContentNode:function(e,i){t.call(this,i),this.type="content",this.string=e},HashNode:function(e,i){t.call(this,i),this.type="hash",this.pairs=e},IdNode:function(e,i){t.call(this,i),this.type="ID";for(var n="",r=[],o=0,a=0,h=e.length;h>a;a++){var l=e[a].part;if(n+=(e[a].separator||"")+l,".."===l||"."===l||"this"===l){if(r.length>0)throw new s("Invalid path: "+n,this);".."===l?o++:this.isScoped=!0}else r.push(l)}this.original=n,this.parts=r,this.string=r.join("."),this.depth=o,this.isSimple=1===e.length&&!this.isScoped&&0===o,this.stringModeValue=this.string},PartialNameNode:function(e,i){t.call(this,i),this.type="PARTIAL_NAME",this.name=e.original},DataNode:function(e,i){t.call(this,i),this.type="DATA",this.id=e},StringNode:function(e,i){t.call(this,i),this.type="STRING",this.original=this.string=this.stringModeValue=e},IntegerNode:function(e,i){t.call(this,i),this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)},BooleanNode:function(e,i){t.call(this,i),this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e},CommentNode:function(e,i){t.call(this,i),this.type="comment",this.comment=e}};return i=n}(i),a=function(){"use strict";var e,t=function(){function e(e,t){return{left:"~"===e.charAt(2),right:"~"===t.charAt(0)||"~"===t.charAt(1)}}function t(){this.yy={}}var i={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(t,i,s,n,r,o){var a=o.length-1;switch(r){case 1:return new n.ProgramNode(o[a-1],this._$);case 2:return new n.ProgramNode([],this._$);case 3:this.$=new n.ProgramNode([],o[a-1],o[a],this._$);break;case 4:this.$=new n.ProgramNode(o[a-2],o[a-1],o[a],this._$);break;case 5:this.$=new n.ProgramNode(o[a-1],o[a],[],this._$);break;case 6:this.$=new n.ProgramNode(o[a],this._$);break;case 7:this.$=new n.ProgramNode([],this._$);break;case 8:this.$=new n.ProgramNode([],this._$);break;case 9:this.$=[o[a]];break;case 10:o[a-1].push(o[a]),this.$=o[a-1];break;case 11:this.$=new n.BlockNode(o[a-2],o[a-1].inverse,o[a-1],o[a],this._$);break;case 12:this.$=new n.BlockNode(o[a-2],o[a-1],o[a-1].inverse,o[a],this._$);break;case 13:this.$=o[a];break;case 14:this.$=o[a];break;case 15:this.$=new n.ContentNode(o[a],this._$);break;case 16:this.$=new n.CommentNode(o[a],this._$);break;case 17:this.$=new n.MustacheNode(o[a-1],null,o[a-2],e(o[a-2],o[a]),this._$);break;case 18:this.$=new n.MustacheNode(o[a-1],null,o[a-2],e(o[a-2],o[a]),this._$);break;case 19:this.$={path:o[a-1],strip:e(o[a-2],o[a])};break;case 20:this.$=new n.MustacheNode(o[a-1],null,o[a-2],e(o[a-2],o[a]),this._$);break;case 21:this.$=new n.MustacheNode(o[a-1],null,o[a-2],e(o[a-2],o[a]),this._$);break;case 22:this.$=new n.PartialNode(o[a-2],o[a-1],e(o[a-3],o[a]),this._$);break;case 23:this.$=e(o[a-1],o[a]);break;case 24:this.$=new n.SexprNode([o[a-2]].concat(o[a-1]),o[a],this._$);break;case 25:this.$=new n.SexprNode([o[a]],null,this._$);break;case 26:this.$=o[a];break;case 27:this.$=new n.StringNode(o[a],this._$);break;case 28:this.$=new n.IntegerNode(o[a],this._$);break;case 29:this.$=new n.BooleanNode(o[a],this._$);break;case 30:this.$=o[a];break;case 31:o[a-1].isHelper=!0,this.$=o[a-1];break;case 32:this.$=new n.HashNode(o[a],this._$);break;case 33:this.$=[o[a-2],o[a]];break;case 34:this.$=new n.PartialNameNode(o[a],this._$);break;case 35:this.$=new n.PartialNameNode(new n.StringNode(o[a],this._$),this._$);break;case 36:this.$=new n.PartialNameNode(new n.IntegerNode(o[a],this._$));break;case 37:this.$=new n.DataNode(o[a],this._$);break;case 38:this.$=new n.IdNode(o[a],this._$);break;case 39:o[a-2].push({part:o[a],separator:o[a-1]}),this.$=o[a-2];break;case 40:this.$=[{part:o[a]}];break;case 43:this.$=[];break;case 44:o[a-1].push(o[a]);break;case 47:this.$=[o[a]];break;case 48:o[a-1].push(o[a])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(e){throw Error(e)},parse:function(e){function t(){var e;return e=i.lexer.lex()||1,"number"!=typeof e&&(e=i.symbols_[e]||e),e}var i=this,s=[0],n=[null],r=[],o=this.table,a="",h=0,l=0,c=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,this.lexer.yylloc===void 0&&(this.lexer.yylloc={});var p=this.lexer.yylloc;r.push(p);var u=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var g,d,m,f,v,y,P,k,S,w={};;){if(m=s[s.length-1],this.defaultActions[m]?f=this.defaultActions[m]:((null===g||g===void 0)&&(g=t()),f=o[m]&&o[m][g]),f===void 0||!f.length||!f[0]){var _="";if(!c){S=[];for(y in o[m])this.terminals_[y]&&y>2&&S.push("'"+this.terminals_[y]+"'");_=this.lexer.showPosition?"Parse error on line "+(h+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+S.join(", ")+", got '"+(this.terminals_[g]||g)+"'":"Parse error on line "+(h+1)+": Unexpected "+(1==g?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(_,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:S})}}if(f[0]instanceof Array&&f.length>1)throw Error("Parse Error: multiple actions possible at state: "+m+", token: "+g);switch(f[0]){case 1:s.push(g),n.push(this.lexer.yytext),r.push(this.lexer.yylloc),s.push(f[1]),g=null,d?(g=d,d=null):(l=this.lexer.yyleng,a=this.lexer.yytext,h=this.lexer.yylineno,p=this.lexer.yylloc,c>0&&c--);break;case 2:if(P=this.productions_[f[1]][1],w.$=n[n.length-P],w._$={first_line:r[r.length-(P||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(P||1)].first_column,last_column:r[r.length-1].last_column},u&&(w._$.range=[r[r.length-(P||1)].range[0],r[r.length-1].range[1]]),v=this.performAction.call(w,a,l,h,this.yy,f[1],n,r),v!==void 0)return v;P&&(s=s.slice(0,2*-1*P),n=n.slice(0,-1*P),r=r.slice(0,-1*P)),s.push(this.productions_[f[1]][0]),n.push(w.$),r.push(w._$),k=o[s[s.length-2]][s[s.length-1]],s.push(k);break;case 3:return!0}}return!0}},s=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,i=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var s=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===s.length?this.yylloc.first_column:0)+s[s.length-i.length].length-i[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return 20>e.length&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,i,s,n;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;r.length>o&&(i=this._input.match(this.rules[r[o]]),!i||t&&!(i[0].length>t[0].length)||(t=i,s=o,this.options.flex));o++);return t?(n=t[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,r[s],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e!==void 0?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,i,s){function n(e,i){return t.yytext=t.yytext.substr(e,t.yyleng-i)}switch(i){case 0:if("\\\\"===t.yytext.slice(-2)?(n(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(n(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return n(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return n(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return t.yytext=n(1,2).replace(/\\"/g,'"'),32;case 24:return t.yytext=n(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return t.yytext=n(1,2),40;case 31:return"INVALID";case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e}();return i.lexer=s,t.prototype=i,i.Parser=t,new t}();return e=t}(),h=function(e,t){"use strict";function i(e){return e.constructor===r.ProgramNode?e:(n.yy=r,n.parse(e))}var s={},n=e,r=t;return s.parser=n,s.parse=i,s}(a,o),l=function(e){"use strict";function t(){}function i(e,t,i){if(null==e||"string"!=typeof e&&e.constructor!==i.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var s=i.parse(e),n=(new i.Compiler).compile(s,t);return(new i.JavaScriptCompiler).compile(n,t)}function s(e,t,i){function s(){var s=i.parse(e),n=(new i.Compiler).compile(s,t),r=(new i.JavaScriptCompiler).compile(n,t,void 0,!0);return i.template(r)}if(null==e||"string"!=typeof e&&e.constructor!==i.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var n;return function(e,t){return n||(n=s()),n.call(this,e,t)}}var n={},r=e;return n.Compiler=t,t.prototype={compiler:t,disassemble:function(){for(var e,t,i,s=this.opcodes,n=[],r=0,o=s.length;o>r;r++)if(e=s[r],"DECLARE"===e.opcode)n.push("DECLARE "+e.name+"="+e.value);else{t=[];for(var a=0;e.args.length>a;a++)i=e.args[a],"string"==typeof i&&(i='"'+i.replace("\n","\\n")+'"'),t.push(i);n.push(e.opcode+" "+t.join(" "))}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var i=0;t>i;i++){var s=this.opcodes[i],n=e.opcodes[i];if(s.opcode!==n.opcode||s.args.length!==n.args.length)return!1;for(var r=0;s.args.length>r;r++)if(s.args[r]!==n.args[r])return!1}if(t=this.children.length,e.children.length!==t)return!1;for(i=0;t>i;i++)if(!this.children[i].equals(e.children[i]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t;var i=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},i)for(var s in i)this.options.knownHelpers[s]=i[s];return this.accept(e)},accept:function(e){var t,i=e.strip||{};return i.left&&this.opcode("strip"),t=this[e.type](e),i.right&&this.opcode("strip"),t},program:function(e){for(var t=e.statements,i=0,s=t.length;s>i;i++)this.accept(t[i]);return this.isSimple=1===s,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t,i=(new this.compiler).compile(e,this.options),s=this.guid++;this.usePartial=this.usePartial||i.usePartial,this.children[s]=i;for(var n=0,r=i.depths.list.length;r>n;n++)t=i.depths.list[n],2>t||this.addDepth(t-1);return s},block:function(e){var t=e.mustache,i=e.program,s=e.inverse;i&&(i=this.compileProgram(i)),s&&(s=this.compileProgram(s));var n=t.sexpr,r=this.classifySexpr(n);"helper"===r?this.helperSexpr(n,i,s):"simple"===r?(this.simpleSexpr(n),this.opcode("pushProgram",i),this.opcode("pushProgram",s),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(n,i,s),this.opcode("pushProgram",i),this.opcode("pushProgram",s),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t,i,s=e.pairs;this.opcode("pushHash");for(var n=0,r=s.length;r>n;n++)t=s[n],i=t[1],this.options.stringParams?(i.depth&&this.addDepth(i.depth),this.opcode("getContext",i.depth||0),this.opcode("pushStringParam",i.stringModeValue,i.type),"sexpr"===i.type&&this.sexpr(i)):this.accept(i),this.opcode("assignToHash",t[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(e,t,i){var s=e.id,n=s.parts[0],r=null!=t||null!=i;this.opcode("getContext",s.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("invokeAmbiguous",n,r)},simpleSexpr:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,i){var s=this.setupFullMustacheParams(e,t,i),n=e.id.parts[0];if(this.options.knownHelpers[n])this.opcode("invokeKnownHelper",s.length,n);else{if(this.options.knownHelpersOnly)throw new r("You specified knownHelpersOnly, but used the unknown helper "+n,e);this.opcode("invokeHelper",s.length,n,e.isRoot)}},sexpr:function(e){var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var i=1,s=e.parts.length;s>i;i++)this.opcode("lookup",e.parts[i])},DATA:function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new r("Scoped data references are not supported: "+e.original,e);this.opcode("lookupData");for(var t=e.id.parts,i=0,s=t.length;s>i;i++)this.opcode("lookup",t[i])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifySexpr:function(e){var t=e.isHelper,i=e.eligibleHelper,s=this.options;if(i&&!t){var n=e.id.parts[0];s.knownHelpers[n]?t=!0:s.knownHelpersOnly&&(i=!1)
}return t?"helper":i?"ambiguous":"simple"},pushParams:function(e){for(var t,i=e.length;i--;)t=e[i],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),"sexpr"===t.type&&this.sexpr(t)):this[t.type](t)},setupFullMustacheParams:function(e,t,i){var s=e.params;return this.pushParams(s),this.opcode("pushProgram",t),this.opcode("pushProgram",i),e.hash?this.hash(e.hash):this.opcode("emptyHash"),s}},n.precompile=i,n.compile=s,n}(i),c=function(e,t){"use strict";function i(e){this.value=e}function s(){}var n,r=e.COMPILER_REVISION,o=e.REVISION_CHANGES,a=e.log,h=t;s.prototype={nameLookup:function(e,t){var i,n;return 0===e.indexOf("depth")&&(i=!0),n=/^[0-9]+$/.test(t)?e+"["+t+"]":s.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']",i?"("+e+" && "+n+")":n},compilerInfo:function(){var e=r,t=o[e];return"this.compilerInfo = ["+e+",'"+t+"'];\n"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,i,s){this.environment=e,this.options=t||{},a("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var n,r=e.opcodes;this.i=0;for(var o=r.length;o>this.i;this.i++)n=r[this.i],"DECLARE"===n.opcode?this[n.name]=n.value:this[n.opcode].apply(this,n.args),n.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new h("Compile completed with content left on stack");return this.createFunctionContext(s)},preamble:function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,i="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(i=i+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(i+=" data = data || {};"),e.push(i)}this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", ")),!this.isChild)for(var i in this.context.aliases)this.context.aliases.hasOwnProperty(i)&&(this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var s=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],n=0,r=this.environment.depths.list.length;r>n;n++)s.push("depth"+this.environment.depths.list[n]);var o=this.mergeSource();if(this.isChild||(o=this.compilerInfo()+o),e)return s.push(o),Function.apply(this,s);var h="function "+(this.name||"")+"("+s.join(",")+") {\n  "+o+"}";return a("debug",h+"\n\n"),h},mergeSource:function(){for(var e,t="",i=0,s=this.source.length;s>i;i++){var n=this.source[i];n.appendToBuffer?e=e?e+"\n    + "+n.content:n.content:(e&&(t+="buffer += "+e+";\n  ",e=void 0),t+=n+"\n  ")}return t},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.stripNext&&(e=e.replace(/^\s+/,"")),this.pendingContent=e},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),"sexpr"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+e.contexts.join(",")+"}"),this.push("{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t,i){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var s=this.lastHelper=this.setupHelper(e,t,!0),n=this.nameLookup("depth"+this.lastContext,t,"context"),r="helper = "+s.name+" || "+n;s.paramsInit&&(r+=","+s.paramsInit),this.push("("+r+",helper "+"? helper.call("+s.callParams+") "+": helperMissing.call("+s.helperMissingParams+"))"),i||this.flushInline()},invokeKnownHelper:function(e,t){var i=this.setupHelper(e,t);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var i=this.setupHelper(0,e,t),s=this.lastHelper=this.nameLookup("helpers",e,"helper"),n=this.nameLookup("depth"+this.lastContext,e,"context"),r=this.nextStack();i.paramsInit&&this.pushSource(i.paramsInit),this.pushSource("if (helper = "+s+") { "+r+" = helper.call("+i.callParams+"); }"),this.pushSource("else { helper = "+n+"; "+r+" = typeof helper === functionType ? helper.call("+i.callParams+") : helper; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t,i,s=this.popStack();this.options.stringParams&&(i=this.popStack(),t=this.popStack());var n=this.hash;t&&n.contexts.push("'"+e+"': "+t),i&&n.types.push("'"+e+"': "+i),n.values.push("'"+e+"': ("+s+")")},compiler:s,compileChildren:function(e,t){for(var i,s,n=e.children,r=0,o=n.length;o>r;r++){i=n[r],s=new this.compiler;var a=this.matchExistingProgram(i);null==a?(this.context.programs.push(""),a=this.context.programs.length,i.index=a,i.name="program"+a,this.context.programs[a]=s.compile(i,t,this.context),this.context.environments[a]=i):(i.index=a,i.name="program"+a)}},matchExistingProgram:function(e){for(var t=0,i=this.context.environments.length;i>t;t++){var s=this.context.environments[t];if(s&&s.equals(e))return t}},programExpression:function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,i=this.environment.children[e],s=i.depths.list,n=[i.index,i.name,"data"],r=0,o=s.length;o>r;r++)t=s[r],1===t?n.push("depth0"):n.push("depth"+(t-1));return(0===s.length?"self.program(":"self.programWithDepth(")+n.join(", ")+")"},register:function(e,t){this.useRegister(e),this.pushSource(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new i(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t,s,n,r="",o=this.isInline();if(o){var a=this.popStack(!0);if(a instanceof i)t=a.value,n=!0;else{s=!this.stackSlot;var h=s?this.incrStack():this.topStackName();r="("+this.push(h)+" = "+a+"),",t=this.topStack()}}else t=this.topStack();var l=e.call(this,t);return o?(n||this.popStack(),s&&this.stackSlot--,this.push("("+r+l+")")):(/^stack/.test(t)||(t=this.nextStack()),this.pushSource(t+" = ("+r+l+");")),t},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,s=e.length;s>t;t++){var n=e[t];n instanceof i?this.compileStack.push(n):this.pushStack(n)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),s=(t?this.inlineStack:this.compileStack).pop();if(!e&&s instanceof i)return s.value;if(!t){if(!this.stackSlot)throw new h("Invalid stack pop");this.stackSlot--}return s},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,s=t[t.length-1];return!e&&s instanceof i?s.value:s},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,i){var s=[],n=this.setupParams(e,s,i),r=this.nameLookup("helpers",t,"helper");return{params:s,paramsInit:n,name:r,callParams:["depth0"].concat(s).join(", "),helperMissingParams:i&&["depth0",this.quotedString(t)].concat(s).join(", ")}},setupOptions:function(e,t){var i,s,n,r=[],o=[],a=[];r.push("hash:"+this.popStack()),this.options.stringParams&&(r.push("hashTypes:"+this.popStack()),r.push("hashContexts:"+this.popStack())),s=this.popStack(),n=this.popStack(),(n||s)&&(n||(this.context.aliases.self="this",n="self.noop"),s||(this.context.aliases.self="this",s="self.noop"),r.push("inverse:"+s),r.push("fn:"+n));for(var h=0;e>h;h++)i=this.popStack(),t.push(i),this.options.stringParams&&(a.push(this.popStack()),o.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+o.join(",")+"]"),r.push("types:["+a.join(",")+"]")),this.options.data&&r.push("data:data"),r},setupParams:function(e,t,i){var s="{"+this.setupOptions(e,t).join(",")+"}";return i?(this.useRegister("options"),t.push("options"),"options="+s):(t.push(s),"")}};for(var l="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),c=s.RESERVED_WORDS={},p=0,u=l.length;u>p;p++)c[l[p]]=!0;return s.isValidJavaScriptVariableName=function(e){return!s.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)?!0:!1},n=s}(s,i),p=function(e,t,i,s,n){"use strict";var r,o=e,a=t,h=i.parser,l=i.parse,c=s.Compiler,p=s.compile,u=s.precompile,g=n,d=o.create,m=function(){var e=d();return e.compile=function(t,i){return p(t,i,e)},e.precompile=function(t,i){return u(t,i,e)},e.AST=a,e.Compiler=c,e.JavaScriptCompiler=g,e.Parser=h,e.parse=l,e};return o=m(),o.create=m,r=o}(r,o,h,l,c);return p}();google.maps.LatLng.prototype.distanceFrom=function(e){var t=6378137,i=this.lat(),s=this.lng(),n=e.lat(),r=e.lng(),o=(n-i)*Math.PI/180,a=(r-s)*Math.PI/180,h=Math.sin(o/2)*Math.sin(o/2)+Math.cos(i*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2),l=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),c=t*l;return c},google.maps.LatLng.prototype.latRadians=function(){return this.lat()*Math.PI/180},google.maps.LatLng.prototype.lngRadians=function(){return this.lng()*Math.PI/180},google.maps.Polygon.prototype.Contains=function(e){for(var t=0,i=!1,s=e.lng(),n=e.lat(),r=0;this.getPath().getLength()>r;r++)t++,t==this.getPath().getLength()&&(t=0),(n>this.getPath().getAt(r).lat()&&this.getPath().getAt(t).lat()>=n||n>this.getPath().getAt(t).lat()&&this.getPath().getAt(r).lat()>=n)&&s>this.getPath().getAt(r).lng()+(n-this.getPath().getAt(r).lat())/(this.getPath().getAt(t).lat()-this.getPath().getAt(r).lat())*(this.getPath().getAt(t).lng()-this.getPath().getAt(r).lng())&&(i=!i);return i},google.maps.Polygon.prototype.Area=function(){for(var e=0,t=0,i=this.Bounds(),s=i.getSouthWest().lng(),n=i.getSouthWest().lat(),r=0;this.getPath().getLength()>r;r++){t++,t==this.getPath().getLength()&&(t=0);var o=this.getPath().getAt(r).distanceFrom(new google.maps.LatLng(this.getPath().getAt(r).lat(),s)),a=this.getPath().getAt(t).distanceFrom(new google.maps.LatLng(this.getPath().getAt(t).lat(),s)),h=this.getPath().getAt(r).distanceFrom(new google.maps.LatLng(n,this.getPath().getAt(r).lng())),l=this.getPath().getAt(t).distanceFrom(new google.maps.LatLng(n,this.getPath().getAt(t).lng()));e+=o*l-a*h}return Math.abs(.5*e)},google.maps.Polygon.prototype.Distance=function(){for(var e=0,t=1;this.getPath().getLength()>t;t++)e+=this.getPath().getAt(t).distanceFrom(this.getPath().getAt(t-1));return e},google.maps.Polygon.prototype.Bounds=function(){for(var e=new google.maps.LatLngBounds,t=0;this.getPath().getLength()>t;t++)e.extend(this.getPath().getAt(t));return e},google.maps.Polygon.prototype.GetPointAtDistance=function(e){if(0==e)return this.getPath().getAt(0);if(0>e)return null;if(2>this.getPath().getLength())return null;for(var t=0,i=0,s=1;this.getPath().getLength()>s&&e>t;s++)i=t,t+=this.getPath().getAt(s).distanceFrom(this.getPath().getAt(s-1));if(e>t)return null;var n=this.getPath().getAt(s-2),r=this.getPath().getAt(s-1),o=(e-i)/(t-i);return new google.maps.LatLng(n.lat()+(r.lat()-n.lat())*o,n.lng()+(r.lng()-n.lng())*o)},google.maps.Polygon.prototype.GetPointsAtDistance=function(e){var t=e,i=[];if(0>=e)return i;for(var s=0,n=0,r=1;this.getPath().getLength()>r;r++)for(n=s,s+=this.getPath().getAt(r).distanceFrom(this.getPath().getAt(r-1));s>t;){var o=this.getPath().getAt(r-1),a=this.getPath().getAt(r),h=(t-n)/(s-n);i.push(new google.maps.LatLng(o.lat()+(a.lat()-o.lat())*h,o.lng()+(a.lng()-o.lng())*h)),t+=e}return i},google.maps.Polygon.prototype.GetIndexAtDistance=function(e){if(0==e)return this.getPath().getAt(0);if(0>e)return null;for(var t=0,i=0,s=1;this.getPath().getLength()>s&&e>t;s++)i=t,t+=this.getPath().getAt(s).distanceFrom(this.getPath().getAt(s-1));return e>t?null:s},google.maps.Polygon.prototype.Bearing=function(e,t){if(null==e?(e=0,t=this.getPath().getLength()-1):null==t&&(t=e+1),!(0>e||e>=this.getPath().getLength()||0>t||t>=this.getPath().getLength())){var i=this.getPath().getAt(e),s=this.getPath().getAt(t);if(i.equals(s))return 0;var n=i.latRadians(),r=i.lngRadians(),o=s.latRadians(),a=s.lngRadians(),h=-Math.atan2(Math.sin(r-a)*Math.cos(o),Math.cos(n)*Math.sin(o)-Math.sin(n)*Math.cos(o)*Math.cos(r-a));return 0>h&&(h+=2*Math.PI),h=180*h/Math.PI,parseFloat(h.toFixed(1))}},google.maps.Polyline.prototype.Contains=google.maps.Polygon.prototype.Contains,google.maps.Polyline.prototype.Area=google.maps.Polygon.prototype.Area,google.maps.Polyline.prototype.Distance=google.maps.Polygon.prototype.Distance,google.maps.Polyline.prototype.Bounds=google.maps.Polygon.prototype.Bounds,google.maps.Polyline.prototype.GetPointAtDistance=google.maps.Polygon.prototype.GetPointAtDistance,google.maps.Polyline.prototype.GetPointsAtDistance=google.maps.Polygon.prototype.GetPointsAtDistance,google.maps.Polyline.prototype.GetIndexAtDistance=google.maps.Polygon.prototype.GetIndexAtDistance,google.maps.Polyline.prototype.Bearing=google.maps.Polygon.prototype.Bearing;var MarkerGenerator=function(){function e(e,t){this.googleProvider=e,this.map=t,this.maxDistance=0,this.gMarkers=[],this.icons=[],this.icons.red=new this.googleProvider.maps.MarkerImage("/assets/img/marker_red.png",new this.googleProvider.maps.Size(20,34),new this.googleProvider.maps.Point(0,0),new this.googleProvider.maps.Point(9,34)),this.icons.green=new this.googleProvider.maps.MarkerImage("/assets/img/green-marker.png",new this.googleProvider.maps.Size(40,64),new this.googleProvider.maps.Point(0,0),new this.googleProvider.maps.Point(10,32),new this.googleProvider.maps.Size(20,32)),this.icons.magenta=new this.googleProvider.maps.MarkerImage("/assets/img/magenta-marker.png",new this.googleProvider.maps.Size(40,64),new this.googleProvider.maps.Point(0,0),new this.googleProvider.maps.Point(10,32),new this.googleProvider.maps.Size(20,32)),this.iconShape={coord:[9,0,6,1,4,2,2,4,0,8,0,12,1,14,2,16,5,19,7,23,8,26,9,30,9,34,11,34,11,30,12,26,13,24,14,21,16,18,18,16,20,12,20,8,18,4,16,2,15,1,13,0],type:"poly"},this.infoWindow=new this.googleProvider.maps.InfoWindow({size:new this.googleProvider.maps.Size(150,50)})}return e.prototype={routeHandler:function(e,t){var i=e.routes[0],s=new this.googleProvider.maps.LatLngBounds;startLocation={},endLocation={};for(var n=new this.googleProvider.maps.Polyline({path:[],strokeColor:"#FF0000",strokeWeight:2}),r=i.legs,o=0,a=r.length;a>o;++o){startLocation.latlng=r[o].start_location,startLocation.address=r[o].start_address,endLocation.latlng=r[o].end_location,endLocation.address=r[o].end_address;for(var h=r[o].steps,l=0,c=h.length;c>l;++l)for(var p=h[l].path,u=0,g=p.length;g>u;++u)n.getPath().push(p[u]),s.extend(p[u])}for(var o=0;n.Distance()>o;o+=t)0!=o&&this.createMarker(n.GetPointAtDistance(o),"200km","200km","magenta")},getMarkerImage:function(e){return e=void 0==e?"red":e,this.icons[e]||(this.icons[e]=new this.googleProvider.maps.MarkerImage("/assets/img/marker_"+e+".png",new this.googleProvider.maps.Size(20,34),new this.googleProvider.maps.Point(0,0),new this.googleProvider.maps.Point(9,34))),this.icons[e]},createMarker:function(e,t,i,s){var n="<b>"+t+"</b><br>"+i,r=new this.googleProvider.maps.Marker({position:e,map:this.map,shadow:this.iconShadow,icon:this.getMarkerImage(s),shape:this.iconShape,title:t,zIndex:Math.round(-1e5*e.lat())<<5});return r.myname=t,this.gMarkers.push(r),this.googleProvider.maps.event.addListener(r,"click",function(){this.infoWindow.setContent(n),this.infoWindow.open(this.map,r)}),r},clearMarkers:function(){for(var e=this.gMarkers.pop();void 0!=e;)console.log("Clearing marker..."),e.setMap(null),e=this.gMarkers.pop()}},e}();window.console=window.console||{},window.console.log=this.console.log||function(){},"function"==typeof window.sdkAsyncInit&&sdkAsyncInit();var TripCost=function(){function e(e,t){this.domElement=document.getElementById(e),this.googleProvider=t,this.directionsService=null,this.directionsDisplay=null,this.map=null,this.polyline=null,this.routed=!1,this.trip=null,this.vehicle=null,this.vehicles=[],this._vehicleMenus=[],this._vehicleMenuListeners=[],this._deleteVehicleMenuListeners=[],this._spinner=null}return e.prototype={initialize:function(e){var t=this;this.googleProvider.maps.event.addDomListener(window,"load",function(){t.directionsService=new t.googleProvider.maps.DirectionsService,t.directionsDisplay=new t.googleProvider.maps.DirectionsRenderer;var i=new t.googleProvider.maps.LatLng(33.8596069,-117.8867514);t.map=new t.googleProvider.maps.Map(t.domElement,{zoom:15,center:i,mapTypeId:t.googleProvider.maps.MapTypeId.ROADMAP}),e()})},getDirections:function(e,t,i){var s=this;this.directionsDisplay.setMap(this.map),this.loading(!0);var n={origin:e,destination:t,travelMode:this.googleProvider.maps.TravelMode.DRIVING};this.directionsService.route(n,function(e,t){s.loading(!1),t==s.googleProvider.maps.DirectionsStatus.OK?(DEBUG&&console.log("Google Maps result: ",e),s.directionsDisplay.setDirections(e),s.trip=e,s.routed=!0,i.success(s.trip)):i.error(e,t)})},getTripInformation:function(e,t){if(null==e||!e.hasOwnProperty("vehicle")||!e.hasOwnProperty("directions"))throw"getTripInformation() requires a parameter object with vehicle and directions properties";if(!t)throw"getTripInformation() requires jQuery";t.ajax({url:"/vehicle-information",type:"get",dataType:"json",data:e,success:function(e){console.log(e)}})},addVehicle:function(e){if(DEBUG&&console.log("Adding vehicle: ",e),this.vehicles.push(e),this._vehicleMenuListeners.length)for(var t=0,i=this._vehicleMenuListeners.length;i>t;++t)this._vehicleMenuListeners[t](this.vehicles);return this.vehicles.length},findVehicle:function(e){DEBUG&&console.log("Finding vehicle: "+e);for(var t=0,i=this.vehicles.length;i>t;++t)if(this.vehicles[t].vehicleId==e)return this.vehicles[t];return null},loadVehicles:function(e){if(e&&DEBUG&&console.log("Loading "+e.length+" vehicles from persistent storage: ",e.length),e)for(var t=0;e.length>t;++t){var i=new Vehicle;DEBUG&&console.log("Vehicle from storage: ",e[t]),i.restore(e[t]),this.addVehicle(i)}},loading:function(e){e?this._spinner.removeClass("fa-map-marker").addClass("fa-spinner fa-spin"):this._spinner.removeClass("fa-spinner fa-spin").addClass("fa-map-marker")},setSpinner:function(e){this._spinner=e},errorMessage:function(e){return e==this.googleProvider.maps.DirectionsStatus.NOT_FOUND?"Invalid start or destination point":e==this.googleProvider.maps.DirectionsStatus.ZERO_RESULTS?"Route could not be found":e==this.googleProvider.maps.DirectionsStatus.MAX_WAYPOINTS_EXCEEDED?"Too many waypoints":e==this.googleProvider.maps.DirectionsStatus.INVALID_REQUEST?"Missing a start or destination":e==this.googleProvider.maps.DirectionsStatus.OVER_QUERY_LIMIT?"Too many Google Maps requests from TripCost":e==this.googleProvider.maps.DirectionsStatus.REQUEST_DENIED?"Problem accessing Google Maps":e==this.googleProvider.maps.DirectionsStatus.UNKNOWN_ERROR?"Unidentified Google Maps error":void 0},addVehicleMenu:function(e){this._vehicleMenus.push(e)},addVehicleMenuListener:function(e){this._vehicleMenuListeners.push(e)},addDeleteVehicleMenuListener:function(e){this._deleteVehicleMenuListeners.push(e)},deleteVehicle:function(e,t){for(var i,s=0,n=this.vehicles.length;n>s;++s)if(this.vehicles[s].vehicleId==e){i=this.vehicles[s];break}if(i){this.vehicles.splice(s,1);for(var s=0,n=this._deleteVehicleMenuListeners.length;n>s;++s)console.log(i),this._deleteVehicleMenuListeners[s](i);t(i)}},getVehicleById:function(e){for(var t=0,i=this.vehicles.length;i>t;++t)if(this.vehicles[t].vehicleId==e)return this.vehicles[t];return null},isActiveVehicle:function(e){return parseInt(this.vehicle.vehicleId)==parseInt(e.vehicleId)},getMap:function(){return this.map}},e}(),Vehicle=function(){function e(e){this.year=e?e.year:"",this.make=e?e.make:"",this.makeFriendlyName=e?e.makeFriendlyName:"",this.model=e?e.model:"",this.modelFriendlyName=e?e.modelFriendlyName:"",this.vehicleId=e?e.vehicleId:null,this.egeHighwayMpg=0,this.egeCityMpg=0,this.egeCombinedMpg=0,this.epaHighwayMpg=0,this.epaCityMpg=0,this.epaCombinedMpg=0,this.fuelCapacity=0,this.mainImage=null}return e.prototype={restore:function(e){for(var t in e)this.hasOwnProperty(t)&&(this[t]=e[t])},name:function(){return this.makeFriendlyName&&this.modelFriendlyName&&this.year?this.year+" "+this.makeFriendlyName+" "+this.modelFriendlyName:this.year&&this.make&&this.model?this.year+" "+this.make+" "+this.model:""},maxRange:function(e){return e?1609.34*this.epaCombinedMpg*this.fuelCapacity:this.epaCombinedMpg*this.fuelCapacity},"delete":function(){},assembleVehicle:function(e,t){var i=this,s={equipmentType:"OTHER",name:"Specifications"},n={styleId:this.vehicleId};e.api("/api/vehicle/v2/styles/"+this.vehicleId+"/equipment",s,function(s){var r=s.equipment[0].attributes;console.log(s,r),i.egeHighwayMpg=parseFloat(i._searchAttributes(r,"Ege Highway Mpg",0)),i.egeCityMpg=parseFloat(i._searchAttributes(r,"Ege City Mpg",9)),i.egeCombinedMpg=parseFloat(i._searchAttributes(r,"Ege Combined Mpg",6)),i.epaHighwayMpg=parseFloat(i._searchAttributes(r,"Epa Highway Mpg",7)),i.epaCityMpg=parseFloat(i._searchAttributes(r,"Epa City Mpg",2)),i.epaCombinedMpg=parseFloat(i._searchAttributes(r,"Epa Combined Mpg",1)),i.fuelCapacity=parseFloat(i._searchAttributes(r,"Fuel Capacity",8)),e.api("/v1/api/vehiclephoto/service/findphotosbystyleid",n,function(e){for(var s="http://media.ed.edmunds-media.com",n=0,r=e.length;r>n;++n)"exterior"==e[n].subType&&"FQ"==e[n].shotTypeAbbreviation&&(i.mainImage=s+i.optimalImageSrc(e[n].photoSrcs,"lg"));console.log("Done with 2 async calls..."),t(i)})})},optimalImageSrc:function(e,t){console.log(e),t=void 0!=t?t:"md";var i;"lg"==t?i="500":"md"==t?i="400":"sm"==t?i="276":"th"==t&&(i="131");for(var s=0,n=e.length;n>s;++s)if(-1!=e[s].indexOf("_"+i+".jpg"))return console.log("Found photo size ("+t+"): "+i,e[s]),e[s];return e[0]},_searchAttributes:function(e,t,i){if(e[i].name==t)return e[i].value;for(var s=0,n=e.length;n>s;++s)if(e[s].name==t)return e[s].value;return null}},e}(),FuelEconomy=function(){function e(e,t){this.$=e,this.edmundsAPI=t,this.vehicle=null,this._vehicleMetadata={},this._spinner=null,this.menus={year:null,make:null,model:null,options:null},this.serverError="There was a problem contacting the FuelEconomy.gov server"}return e.prototype={vehicleYearMenu:function(){for(var e=new Date,t=e.getFullYear()+2,i=1990,s=[],n=t;n>=i;--n)s.push(n);this._populateSelect(this.menus.year,s,s),this._eraseSelection([this.menus.make,this.menus.model,this.menus.options])},vehicleMakeMenu:function(){var e=this;this._loading(!0);var t={year:this._vehicleMetadata.year};this.edmundsAPI.api("/api/vehicle/v2/makes",t,function(t){console.log("makesResponse: ",t);for(var i=[],s=[],n=0,r=t.makesCount;r>n;++n)i.push(t.makes[n].niceName),s.push(t.makes[n].name);e._populateSelect(e.menus.make,i,s),e._eraseSelection([e.menus.model,e.menus.options]),e._loading(!1)})},vehicleModelMenu:function(){var e=this;this._loading(!0),this.edmundsAPI.api("/api/vehicle/v2/"+this._vehicleMetadata.make+"/models",null,function(t){console.log("modelsResponse: ",t);for(var i=[],s=[],n=0,r=t.modelsCount;r>n;++n)i.push(t.models[n].niceName),s.push(t.models[n].name);e._populateSelect(e.menus.model,i,s),e._eraseSelection([e.menus.options]),e._loading(!1)})},vehicleOptionsMenu:function(){var e=this;this._loading(!0);var t=this._vehicleMetadata.make+"/"+this._vehicleMetadata.model+"/"+this._vehicleMetadata.year;this.edmundsAPI.api("/api/vehicle/v2/"+t,null,function(t){console.log("optionsResponse: ",t);for(var i=[],s=[],n=0,r=t.styles.length;r>n;++n)i.push(t.styles[n].id),s.push(t.styles[n].name);e._populateSelect(e.menus.options,i,s),e._loading(!1)})},showVehiclePreview:function(e,t){this._loading(!0);var i=this,s={styleId:this._vehicleMetadata.vehicleId},n={url:null,description:this._vehicleMetadata.year+" "+this._vehicleMetadata.make+" "+this._vehicleMetadata.model};this.edmundsAPI.api("/v1/api/vehiclephoto/service/findphotosbystyleid",s,function(s){for(var r="http://media.ed.edmunds-media.com",o=0,a=s.length;a>o;++o)"exterior"==s[o].subType&&"FQ"==s[o].shotTypeAbbreviation&&(n.url=r+e.prototype.optimalImageSrc(s[o].photoSrcs,"th"));i._loading(!1),t(n)},function(){t(n)})},getVehicleMetadata:function(){return this._vehicleMetadata},setVehicleMetadata:function(e,t){this._vehicleMetadata[e]=t},saveVehicle:function(e,t){this._loading(!0),t(),this._loading(!1)},_populateSelect:function(e,t,i){if($(e).find("option:first-child").text("Choose..."),$(e).find("option:not(:eq(0))").remove(),t.length!=i.length)return DEBUG&&alert("_populateSelect: keys and values must be of the same length"),console.log("_populateSelect: keys and values must be of the same length"),void 0;for(var s=0,n=t.length;n>s;++s)this.$(e).append(this.$("<option></option>").attr("value",t[s]).text(i[s]))},_eraseSelection:function(e){$.each(e,function(e,t){$(t).find("option:not(:eq(0))").remove()})},_loading:function(e){e?($(this._spinner).show(),console.log("Spinner: ON")):($(this._spinner).hide(),console.log("Spinner: OFF"))},setSpinner:function(e){this._spinner=e},reset:function(e){$(e).find("select").val("")}},e}(),Persistence=function(){function e(e){this.adapter=e}return e.prototype={get:function(e){var t=JSON.parse(this.adapter.getItem(e));return t?0>t.timestamp||(new Date).getTime()<t.timestamp?JSON.parse(t.value):this.delete(e):null},set:function(e,t,i){var i=i?1e3*60*i:-1,s={value:JSON.stringify(t),timestamp:i>0?(new Date).getTime()+i:i};this.adapter.setItem(e,JSON.stringify(s))},"delete":function(e){this.adapter.removeItem(e)},pushItem:function(e,t,i){var s=this.get(e)||[];DEBUG&&console.log(t),null!=s&&s instanceof Array&&(s.push(t),this.set(e,s,i))},deleteAt:function(e,t,i){var s=this.get(e);console.log("deleting "+e+" at "+t),null!=s&&s instanceof Array&&(s.splice(t,1),this.set(e,s,i))},searchAndDelete:function(e,t){var i=this.get(e);if(i)for(var s=0,n=i.length;n>s;++s)t(i[s])&&this.deleteAt(e,s)}},e}(),DEBUG=!0;$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},Handlebars.registerHelper("formatMoney",function(e){var t=isNaN(t=Math.abs(t))?2:t,i=void 0==i?".":i,s=void 0==s?",":s,n=0>e?"-":"",r=parseInt(e=Math.abs(+e||0).toFixed(t))+"",o=(o=r.length)>3?o%3:0;return n+(o?r.substr(0,o)+s:"")+r.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+s)+(t?i+Math.abs(e-r).toFixed(t).slice(2):"")}),$(function(){function e(){$('[data-toggle="dropdown"]').parent().removeClass("open"),$(".navbar-toggle").hasClass("collapsed")||$(".navbar-toggle").click()}if($(".dropdown-menu form").click(function(e){e.stopPropagation()}),$("#map-canvas").length){if(!google)return alert("Could not load Google Maps. Exiting..."),void 0;var t,i=new TripCost("map-canvas",google);i.initialize(function(){t=new MarkerGenerator(google,i.map)}),i.setSpinner($(".directions-spinner"));var s=$('#directions-form select[name="vehicle"]'),n=$("#nav-vehicle-list"),r=new EDMUNDSAPI("qgtgm3apuq3fjkbfnzmmksnt"),o=new FuelEconomy(jQuery,r);o.setSpinner(".add-vehicle-spinner"),o.menus.year=$("select#add-vehicle-year"),o.menus.make=$("select#add-vehicle-make"),o.menus.model=$("select#add-vehicle-model"),o.menus.options=$("select#add-vehicle-options"),i.addVehicleMenuListener(function(e){DEBUG&&console.log("Erasing all vehicle menu options"),s.find("option:not(:eq(0))").remove(),DEBUG&&console.log("Adding vehicles to select menu: ",e),$.each(e,function(e,t){s.append($("<option></option>").attr("value",t.vehicleId).text(t.name()))}),simpleHandlebarsCompiler("#vehicle-list-template",{vehicles:e},n)}),i.addDeleteVehicleMenuListener(function(e){console.log(e),s.find("option[value="+e.vehicleId+"]").remove(),n.find("li[data-vehicle-id="+e.vehicleId+"]").remove()});var a=new Persistence(localStorage),h={start:$('#directions-form input[name="start"]'),startError:$("#directions-form .start-error"),destination:$('#directions-form input[name="destination"]'),destinationError:$("#directions-form .destination-error"),vehicle:$('#directions-form select[name="vehicle"]'),vehicleError:$("#directions-form .vehicle-select-error"),routeError:$("#directions-form .route-error")};
h.start.on("keyup",function(){h.startError.html("")}),h.destination.on("keyup",function(){h.destinationError.html("")}),h.vehicle.on("change",function(){h.vehicleError.html("")}),i.loadVehicles(a.get("vehicles")),0==i.vehicles.length&&simpleHandlebarsCompiler("#vehicle-list-template",{vehicles:[]},n),$("#findRoute").click(function(s){s.preventDefault();var n=!1;""==h.vehicle.find(":selected").val()&&(h.vehicleError.html("Please select a vehicle first"),n=!0),""==h.start.val()&&(h.startError.html("Please enter a starting point"),n=!0),""==h.destination.val()&&(h.destinationError.html("Please enter destination"),n=!0),n||(i.vehicle=i.findVehicle(h.vehicle.find(":selected").val()),i.getDirections($("#start").val(),$("#destination").val(),{success:function(s){h.routeError.html(""),$("#results-button").fadeIn(),e();var n=0,r=3.9;console.log(s);for(var o=0,a=s.routes.length;a>o;++o)for(var l=0,c=s.routes[o].legs.length;c>l;++l)n+=s.routes[o].legs[l].distance.value;distanceInMiles=621371e-9*n;var p=distanceInMiles/i.vehicle.epaCombinedMpg*r,u=distanceInMiles/i.vehicle.egeCombinedMpg*r,g=i.vehicle.maxRange(!0)||482803;t.routeHandler(s,g),console.log("Vehicle for route: ",i.vehicle),simpleHandlebarsCompiler("#results-template",{epa:p,ege:u,mainImage:i.vehicle.mainImage,name:i.vehicle.name},"#results-container")},error:function(e,t){h.routeError.html(i.errorMessage(t))}}))}),$("#add-vehicle-modal").on("show.bs.modal",function(){o.vehicleYearMenu()}),$("select#add-vehicle-year").change(function(e){o.setVehicleMetadata("year",$(e.target).val()),o.vehicleMakeMenu()}),$("select#add-vehicle-make").change(function(e){o.setVehicleMetadata("make",$(e.target).val()),o.setVehicleMetadata("makeFriendlyName",$(e.target).find("option:selected").text()),o.vehicleModelMenu()}),$("select#add-vehicle-model").change(function(e){o.setVehicleMetadata("model",$(e.target).val()),o.setVehicleMetadata("modelFriendlyName",$(e.target).find("option:selected").text()),o.vehicleOptionsMenu()}),$("select#add-vehicle-options").change(function(e){o.setVehicleMetadata("vehicleId",$(e.target).val()),o.showVehiclePreview(Vehicle,function(e){simpleHandlebarsCompiler("#vehicle-preview-template",e,"div.add-vehicle-preview div.image-thumbnail")})}),$("#add-vehicle-save").click(function(){i.vehicle=new Vehicle(o.getVehicleMetadata()),i.vehicle.assembleVehicle(r,function(e){o.saveVehicle(e,function(){$("#add-vehicle-modal").modal("hide"),i.addVehicle(e),a.pushItem("vehicles",e)})})}),$("#add-vehicle-reset").click(function(){o.reset("form#add-vehicle")}),$('a[href="#results-container"]').click(function(t){t.preventDefault(),e(),$("html, body").animate({scrollTop:$("#results-container").offset().top},500)}),$('a[href="#top"]').click(function(t){t.preventDefault(),e(),$("html, body").animate({scrollTop:$("html").top},500)}),$("#nav-vehicle-list a").click(function(e){e.preventDefault();var s=$(e.target).parents("li").attr("data-vehicle-id");$(e.target).hasClass("close")?(DEBUG&&console.log("Deleting vehicle "+s+"..."),confirm("Are you sure you wish to delete the vehicle?")&&i.deleteVehicle(s,function(e){a.searchAndDelete("vehicles",function(e){return parseInt(e.vehicleId)==parseInt(s)}),i.isActiveVehicle(e)&&(i.vehicle=null,i.routed&&(t.clearMarkers(),i.directionsDisplay.setMap(null),i.directionsDisplay=new google.maps.DirectionsRenderer,$("#results-container").html("")))})):DEBUG&&console.log("Editing vehicle "+s+"...")})}});